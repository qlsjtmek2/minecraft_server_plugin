package me.shinkhan.BarHealth;

import org.bukkit.entity.Blaze;
import org.bukkit.entity.CaveSpider;
import org.bukkit.entity.Chicken;
import org.bukkit.entity.Cow;
import org.bukkit.entity.Creeper;
import org.bukkit.entity.Damageable;
import org.bukkit.entity.EnderDragon;
import org.bukkit.entity.Enderman;
import org.bukkit.entity.Entity;
import org.bukkit.entity.Ghast;
import org.bukkit.entity.Giant;
import org.bukkit.entity.IronGolem;
import org.bukkit.entity.Pig;
import org.bukkit.entity.PigZombie;
import org.bukkit.entity.Player;
import org.bukkit.entity.Sheep;
import org.bukkit.entity.Silverfish;
import org.bukkit.entity.Skeleton;
import org.bukkit.entity.Slime;
import org.bukkit.entity.Snowman;
import org.bukkit.entity.Spider;
import org.bukkit.entity.Squid;
import org.bukkit.entity.Wither;
import org.bukkit.entity.WitherSkull;
import org.bukkit.entity.Wolf;
import org.bukkit.entity.Zombie;
import org.bukkit.event.EventHandler;
import org.bukkit.event.EventPriority;
import org.bukkit.event.Listener;
import org.bukkit.event.entity.EntityDamageByEntityEvent;
import org.bukkit.plugin.java.JavaPlugin;

import me.confuser.barapi.BarAPI;

public class mainEvent extends JavaPlugin implements Listener {
	BarAPI B;
	main main;
		
	public mainEvent(main main)
	{
		this.main = main;
	}

	@SuppressWarnings("static-access")
	@EventHandler(priority=EventPriority.MONITOR, ignoreCancelled=true)
	public void onEntityDamage(EntityDamageByEntityEvent e) {
		Entity en = e.getEntity();
		Entity ed = e.getDamager();
		
		if (en instanceof Player) {
			if (ed instanceof Player) {
				Player dp = (Player) ed;
				Player ep = (Player) en;
				float i = 100 / ep.getMaxHealth();
				B.setMessage(dp, ep.getDisplayName());
				B.setHealth(dp, i * (ep.getHealth() - e.getDamage()));
				if (B.getHealth(dp) <= 0) B.removeBar(dp);
			}
		}
		
		else if (en instanceof Entity) {
			if (ed instanceof Player) {
				Player dp = (Player) ed;
				Damageable de = (Damageable) en;
				String n = null;
				float i = 100 / de.getMaxHealth();
				
				if (en instanceof Pig) n = "µÅÁö";
				else if (en instanceof Cow) n = "¼Ò";
				else if (en instanceof Sheep) n = "¾ç";
				else if (en instanceof Chicken) n = "´ß";
				else if (en instanceof Squid) n = "¿ÀÂ¡¾î";
				else if (en instanceof Spider) n = "°Å¹Ì";
				else if (en instanceof PigZombie) n = "Á»ºñ ÇÇ±×¸Ç";
				else if (en instanceof Wolf) n = "´Á´ë";
				else if (en instanceof CaveSpider) n = "µ¿±¼ °Å¹Ì";
				else if (en instanceof Zombie) n = "Á»ºñ";
				else if (en instanceof Skeleton) n = "½ºÄÌ·¹Åæ";
				else if (en instanceof Creeper) n = "Å©¸®ÆÛ";
				else if (en instanceof Enderman) n = "¿£´õ¸Ç";
				else if (en instanceof Ghast) n = "°í½ºÆ®";
				else if (en instanceof Giant) n = "ÀÚÀÌ¾ðÆ®";
				else if (en instanceof Silverfish) n = "Á»¹ú·¹";
				else if (en instanceof Slime) n = "½½¶óÀÓ";
				else if (en instanceof WitherSkull) n = "À§´õ ½ºÄÌ·¹Åæ";
				else if (en instanceof Blaze) n = "ºí·¹ÀÌÁî";
				else if (en instanceof Wither) n = "À§´õ";
				else if (en instanceof EnderDragon) n = "¿£´õ µå·¡°ï";
				else if (en instanceof IronGolem) n = "Ã¶ °ñ·½";
				else if (en instanceof Snowman) n = "´«»ç¶÷";
				else en.getType().getName();
				B.setMessage(dp, n);
				B.setHealth(dp, i * (de.getHealth() - e.getDamage()));
				if (B.getHealth(dp) <= 0) B.removeBar(dp);
			}
		}
	}
}
